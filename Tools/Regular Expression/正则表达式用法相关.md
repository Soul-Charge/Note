# 正则表达式用法相关

## 在Perl中修正单词的大小写

```perl
$var =~ s/\bJeff/Jeff/i;
# 使用i选项使得匹配不区分大小写
# 例：
# jeff 变成 Jeff
# JEFF 变成 Jeff
# JeFf 变成 Jeff
```

## 在Perl中修改浮点数表示位数

通常保留小数点后两位，如果第三位不为零也保留。  

```perl
$price =~ s/(\.\d\d[1-9]?)\d*/$1/;
```

## 用Perl对文件进行修改

### 单行命令

```shell
perl -p -i -e 's/regx/text/g' file file2
# -p  : 对文件的每一行进行操作
# -i  : 将替换结果写回文件,不加此选项则命令会将结果回显但不改变文件
# -e  : 表示单行perl程序
#  g  : 一行中进行多次操作(类似于vim的替换操作的g)
# file: 要操作的文件
# file2: 可能的多个文件，也可以用*.txt等方式代替文件名
```

### 使用单独的脚本文件

```shell
# 在终端运行的命令
perl -w script.pl inputfile > outputfile
# script.pl  用来处理的脚本文件
# inputfile  需要处理的文件
# outputfile 处理结果输出的文件
```

```perl
# 脚本文件的写法
# $line = <> 会从inputfile中读取一行内容保存(保留换行符)到line变量中
wile ($line = <>) # 读取文件每一行，具体操作不是很明白，应该是当<>到达文件尾部返回一个假值
{
    处理$line...
}
```

## 用Perl给数字添加逗号

### 使用环视

每三位数一个逗号。  

```perl
$val =~ s/(?<=\d)(?=(?:\d\d\d)+(?!\d))/,/g
# 注意不能用\D 代替(?!\d)
# 因为\D 必须要匹配一个字符，而(?!\d)不匹配字符
```

### 不使用环视

```perl
while ($text =~ s/(\d)((\d\d\d)+\b)/$1,$2/g){
    # 循环内不用进行任何操作
}
```