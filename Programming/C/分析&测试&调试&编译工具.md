# 分析&测试&调试&编译工具

## 会发生的问题

### 存储器泄露

即分配的内存无法回收，若不及时解决持续下去将浪费大量内存。  

#### 使用valgrind

可以使用`valgrind`工具记录哪些代码分配了哪些存储器以发现泄漏问题。  

##### Linux上使用

```
$ valgrind --leak-check=full ./程序名
```

运行程序结束后，valgrind会报告信息。  

## 分析工具

### gprof(GNU Profiler, GNU分析器)

用于分析程序的性能，找到程序中哪个部分最慢。  
gprof会修改程序，运行修改后的程序后会生成性能报告，用gprof分析。  

### gcov(GNU Coverage, GNU覆盖率测试)

检查代码中哪些部分没执行，写自动化测试时很有用。  

## 自动化测试工具

### AceUnit

<font color='orange'>不知道怎么用</font>  

## 调试工具

### gdb(GNU Project Debugger)

可用于命令行和IDE。  

## 编译工具

### gcc

#### 调试

```
gcc -g file.c
```

编译时添加调试信息，记录编译代码的行号。  

一个调试时常见的问题：发现错误的位置比真正位置滞后一行  

#### 优化

使用编译优化标识选项会开启一些优化选项使得编译更慢以加快代码运行速度或减小代码大小。  

* `-O`
    在不影响编译速度的前提下，尽量优化降低代码大小和代码执行速度。  
* `-O2`
    牺牲部分编译速度，提高代码执行速度。  
* `-O3`
    编译速度更慢，会提高代码大小，降低执行时间。  
* `-Ofast`
    编译速度最慢，将不会严格遵循语言标准。  

#### 警告

* `-Wall`
    显示所有警告（并不）。  
* `-Wextra`
    真·显示所有警告。  
* `-Werror`
    将警告作为错误处理。  